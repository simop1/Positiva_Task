@model Positiva_Task.Models.LoginModel

@{
	ViewBag.Title = "Login";
}

<div>
	@using (Ajax.BeginForm("Login", "Home", new AjaxOptions { HttpMethod = "POST", OnSuccess = "OnSubmitSuccess", OnFailure = "OnSubmitFailure", OnBegin = "ValidateForm" }))
	{
		@Html.AntiForgeryToken()

		<div class="row">
			<h2>@ViewBag.Title</h2>
			<br />
			<span>You can login with your user name or email.</span>
		</div>

		<div class="form-row">
			<br />
			<div class="row">
				@Html.ValidationSummary(true) <br />
				@Html.LabelFor(m => m.UserName) <br />
				@Html.TextBoxFor(m => m.UserName)
				@Html.ValidationMessageFor(m => m.UserName)
			</div>

			<div class="row">
				@Html.ValidationSummary(true) <br />
				@Html.LabelFor(m => m.Password) <br />
				@Html.TextBoxFor(m => m.Password)
				@Html.ValidationMessageFor(m => m.Password)
			</div>
		</div>
		<br />

		<div class="row">
			<button id="btnLogin" type="submit" class="btn btn-primary">Login</button>
		</div>
		<br />
	}

	<div class="row">
		@Html.ActionLink("Forgot password?", "ResetPassword", "Home", null, new { @class = "page-scroll" })
	</div>
	@*<br /><br />
		<span>Not registered?</span>
		<button id="btnRegister" type="submit" class="btn btn-primary">Register</button>*@
</div>

@section scripts
{


	@*<script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
	<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
	<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
	<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>*@

	<script type="text/javascript">

		function OnSubmitSuccess(data) {
			if (data.Error == true) {
				alert(data.Message);
			}
		}

		function ValidateForm() {
			return $('form').validate().form();
		}

		function OnSubmitFailure(data) {
			alert("Login failed.");
		}
	</script>
}